<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Home BLE Mesh Network &#8211; Lior Ben-Yehoshua</title>
<meta name="description" content="Bluetooth low energy mesh network to control various things around my house.">
<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Home BLE Mesh Network">
<meta name="twitter:description" content="Bluetooth low energy mesh network to control various things around my house.">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lior9999.com//images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Home BLE Mesh Network">
<meta property="og:description" content="Bluetooth low energy mesh network to control various things around my house.">
<meta property="og:url" content="http://lior9999.com//home-ble-mesh-network/">
<meta property="og:site_name" content="Lior Ben-Yehoshua">





<link rel="canonical" href="http://lior9999.com//home-ble-mesh-network/">
<link href="http://lior9999.com//feed.xml" type="application/atom+xml" rel="alternate" title="Lior Ben-Yehoshua Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://lior9999.com//assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://lior9999.com//assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://lior9999.com//assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://lior9999.com//assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://lior9999.com//favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://lior9999.com//favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://lior9999.com//images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://lior9999.com//images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://lior9999.com//images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://lior9999.com//images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://lior9999.com/">Lior Ben-Yehoshua</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
					    
					        
					    
					    <li><a href="http://lior9999.com//about/" >About</a></li>
					  
					    
					        
					    
					    <li><a href="http://lior9999.com//projects/" >Projects</a></li>
					  
					    
					        
					    
					    <li><a href="http://lior9999.com//resources/" >Resources</a></li>
					  
					    
					        
					    
					    <li><a href="http://lior9999.com//files/Lior_Ben-Yehoshua_Resume.pdf" >Resume</a></li>
					  
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    



	<img src="http://lior9999.com//images/bio-photo.jpg" class="bio-photo" alt="Lior bio photo">

<h3>Lior</h3>
<h3>Ben-Yehoshua</h3>
<p></p>
<a href="mailto:admin@lior9999.com" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> Email</a>

<a href="http://facebook.com/liorben" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>

<a href="http://linkedin.com/in/Lior9999" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/Lior9999" class="author-social" target="_blank"><i class="fa fa-github"></i> Github</a>







  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="http://lior9999.com//home-ble-mesh-network/" rel="bookmark" title="Home BLE Mesh Network">Home BLE Mesh Network</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>Two weeks ago I ordered some Bluegiga BLE112 bluetooth low energy modules to play around with. There are some light fixtures around my house that I’d like to be able to control more conveniently, so I figured why not use BLE to do it. You can get the BLE112 modules over at the <a href="http://www.semiconductorstore.com/cart/pc/viewPrd.asp?idproduct=46652">Semiconductor Store</a> for about $14 a pop. I also purchased a breakout panel from <a href="http://www.inmojo.com/store/jeff-rowberg/item/ble112-bluetooth-low-energy-breakout/">Jeff Rowberg’s</a> online shop for $6 each (Jeff is a field applications engineer at Bluegiga). I could’ve also just used my free CC2541 samples that I got straight from TI and broken them out with a Schmart board for only about $10, but decided to go with Bluegiga because of a different reason entirely: BGScript. You’ll also need a way to flash the BLE112. I used my old <a href="http://www.ti.com/tool/cc-debugger">CC-Debugger</a> from TI.</p>

<h4 id="bgscript">BGScript</h4>

<p>BGScript is a simple BASIC-style programming language that allows you to embed applications to the Bluegiga BLE modules. BGScript is a very simple and easy to learn programming language, which is partly why I chose to use it. But it also frees me from being forced to use IAR Embedded Workbench to write code from the CC2541, something that is pretty much impossible to do without having to deal with annoying evaluation licenses or forking over some serious cash. You can find all of the downloads, documentation, and a syntax highlighter for BGScript over at the Bluegiga product support page by registering for their website.</p>

<h4 id="ble112-modules">BLE112 modules</h4>

<p>As a word of caution, be very careful when flashing the BLE112 modules. When I initially toyed around with them I was using just a breadboard and some jumpers. This ended up bricking my module and losing the device’s serial # and MAC address. This seems to be a common occurrence, so I would recommend recording those numbers somewhere and adding a proper programming header to whatever breakout you use.</p>

<figure>
	<a href="/images/BLE112_breakoutpinout.png"><img src="/images/BLE112_breakoutpinout.png" /></a>
	<figcaption>BLE112 breakout pinout for use with the CC-Debugger.</figcaption>
</figure>

<h4 id="approach">Approach</h4>

<p>At first I just wanted to be able to control a few remote relays by using a simple iPhone app (everyone in my house owns iPhones, and I don’t particularly want to take the time to learn android app dev). Getting that to work was extremely trivial and only took about one afternoon. To make this project more interesting, I’ve decided to add some features to the system:</p>

<ul>
  <li>Create a mesh network too allow data exchange between far away sensors while maintaining low power.</li>
  <li>Use the proximity profile (RSSI) to determine where a user is within the house.</li>
  <li>Allow each house member a specific profile that they can customize.</li>
  <li>Manage which nodes do what based on a user’s location and specific profile.</li>
</ul>

<h4 id="to-do">To-Do</h4>

<p>Recent freelance projects have forced me to delay this project by quite a bit. Hopefully I’ll be able to return to it soon. What’s left:</p>

<ul>
  <li>Finish writing a simple IOS app.</li>
  <li>Order more BLE112 modules (need about 4 more).</li>
  <li>Finalize mesh network protocol and code.</li>
  <li>Tune my RSSI settings.</li>
</ul>

<p>Will update my progress once I get some more free time.</p>

<h4 id="future-plans">Future Plans</h4>

<p>Although the probability of me having enough time to add more features to the network seems very unlikely, a boy can dream. Here’s what I’d like to do with the mesh network once my current to-do list is finished:</p>

<ul>
  <li>Add temperature sensors to some of the nodes to map out ambient temperature.</li>
  <li>Add more nodes to control every light via the network.</li>
  <li>Integrate the AC system into the network.</li>
</ul>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          



	<img src="http://lior9999.com//images/bio-photo.jpg" class="bio-photo" alt="Lior bio photo">

<h3>Lior</h3>
<h3>Ben-Yehoshua</h3>
<p></p>
<a href="mailto:admin@lior9999.com" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> Email</a>

<a href="http://facebook.com/liorben" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>

<a href="http://linkedin.com/in/Lior9999" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/Lior9999" class="author-social" target="_blank"><i class="fa fa-github"></i> Github</a>







        </div>
        <p class="byline"><strong>Home BLE Mesh Network</strong> was published on <time datetime="2014-09-25T14:17:10-04:00">September 25, 2014</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://lior9999.com//posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="http://lior9999.com//boilermakebadge-i/" title="BoilerMake Hackathon Badge">BoilerMake Hackathon Badge</a></li>
    
      <li><a href="http://lior9999.com//RAL/" title="RAL - Robotic Autonomous Lawnmower">RAL - Robotic Autonomous Lawnmower</a></li>
    
      <li><a href="http://lior9999.com//3d-microfluidics-structures-via-vacuum-deformation/" title="3D Microfluidics Structures via Vacuum Deformation">3D Microfluidics Structures via Vacuum Deformation</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2014 Lior. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55929936-1', 'auto');
  ga('send', 'pageview');

</script>
  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://lior9999.com//assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://lior9999.com//assets/js/scripts.min.js"></script>

	        

</body>
</html>